<!DOCTYPE html>
<html lang="en-CA">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Connecting Google API to Databricks | Federal Science DataHub</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="shortcut icon" href="https://notification.canada.ca/static/images/favicon.ico">
    <script>
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-KRKRZQV');
    </script>
    <script async="true" src="https://www.googletagmanager.com/gtag/js?id=G-R04KFLQCVQ"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-R04KFLQCVQ', {anonymize_ip: true});
    </script>
    <meta name="description" content="Learn how to use the FSDH platform">
    <meta charset="utf-8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.b59c7f1d.css" as="style"><link rel="preload" href="/assets/js/app.0a2a5975.js" as="script"><link rel="preload" href="/assets/js/4.dafd24fd.js" as="script"><link rel="preload" href="/assets/js/2.d936b15f.js" as="script"><link rel="preload" href="/assets/js/1.19ca758f.js" as="script"><link rel="preload" href="/assets/js/23.a59c3ee7.js" as="script"><link rel="prefetch" href="/assets/js/10.a6457c3f.js"><link rel="prefetch" href="/assets/js/100.85215be8.js"><link rel="prefetch" href="/assets/js/101.f4d3c114.js"><link rel="prefetch" href="/assets/js/102.43e0af8e.js"><link rel="prefetch" href="/assets/js/103.4aa134e8.js"><link rel="prefetch" href="/assets/js/104.89b1f352.js"><link rel="prefetch" href="/assets/js/105.2c7257da.js"><link rel="prefetch" href="/assets/js/106.28828cb7.js"><link rel="prefetch" href="/assets/js/107.03894f46.js"><link rel="prefetch" href="/assets/js/108.976afe8f.js"><link rel="prefetch" href="/assets/js/109.e919eb71.js"><link rel="prefetch" href="/assets/js/11.6740aaf5.js"><link rel="prefetch" href="/assets/js/110.d4d4e55b.js"><link rel="prefetch" href="/assets/js/111.73622971.js"><link rel="prefetch" href="/assets/js/112.725353e9.js"><link rel="prefetch" href="/assets/js/113.b9e523ad.js"><link rel="prefetch" href="/assets/js/114.695b89bf.js"><link rel="prefetch" href="/assets/js/115.8a6e0ff6.js"><link rel="prefetch" href="/assets/js/116.eba46494.js"><link rel="prefetch" href="/assets/js/117.ac90ecf2.js"><link rel="prefetch" href="/assets/js/118.ab71ed8f.js"><link rel="prefetch" href="/assets/js/119.a56c547d.js"><link rel="prefetch" href="/assets/js/12.95218709.js"><link rel="prefetch" href="/assets/js/120.6ef9b6df.js"><link rel="prefetch" href="/assets/js/121.3b66427f.js"><link rel="prefetch" href="/assets/js/122.fca01062.js"><link rel="prefetch" href="/assets/js/13.efb9ce07.js"><link rel="prefetch" href="/assets/js/14.a9ccf8ab.js"><link rel="prefetch" href="/assets/js/15.d6b231bc.js"><link rel="prefetch" href="/assets/js/16.d6bef624.js"><link rel="prefetch" href="/assets/js/17.3422d1e8.js"><link rel="prefetch" href="/assets/js/18.cd78629b.js"><link rel="prefetch" href="/assets/js/19.cec6d776.js"><link rel="prefetch" href="/assets/js/20.80d382c5.js"><link rel="prefetch" href="/assets/js/21.06973a16.js"><link rel="prefetch" href="/assets/js/22.c21d3b36.js"><link rel="prefetch" href="/assets/js/24.c4769d6f.js"><link rel="prefetch" href="/assets/js/25.12bad863.js"><link rel="prefetch" href="/assets/js/26.25d769e7.js"><link rel="prefetch" href="/assets/js/27.21c948be.js"><link rel="prefetch" href="/assets/js/28.518a3878.js"><link rel="prefetch" href="/assets/js/29.1f44630f.js"><link rel="prefetch" href="/assets/js/3.483d7c3c.js"><link rel="prefetch" href="/assets/js/30.7287f1ad.js"><link rel="prefetch" href="/assets/js/31.e9b3e747.js"><link rel="prefetch" href="/assets/js/32.e00610a0.js"><link rel="prefetch" href="/assets/js/33.56eb8b8a.js"><link rel="prefetch" href="/assets/js/34.0385d86b.js"><link rel="prefetch" href="/assets/js/35.8a232afb.js"><link rel="prefetch" href="/assets/js/36.6df5f29e.js"><link rel="prefetch" href="/assets/js/37.5cbf2e6f.js"><link rel="prefetch" href="/assets/js/38.a3491c11.js"><link rel="prefetch" href="/assets/js/39.e690063b.js"><link rel="prefetch" href="/assets/js/40.88a5993f.js"><link rel="prefetch" href="/assets/js/41.6bddbde1.js"><link rel="prefetch" href="/assets/js/42.5d460257.js"><link rel="prefetch" href="/assets/js/43.b9f67c15.js"><link rel="prefetch" href="/assets/js/44.cec63df2.js"><link rel="prefetch" href="/assets/js/45.8529b952.js"><link rel="prefetch" href="/assets/js/46.322ca9f6.js"><link rel="prefetch" href="/assets/js/47.0f77804b.js"><link rel="prefetch" href="/assets/js/48.19ec2f28.js"><link rel="prefetch" href="/assets/js/49.17254e9d.js"><link rel="prefetch" href="/assets/js/5.de5a16ea.js"><link rel="prefetch" href="/assets/js/50.cde4e83f.js"><link rel="prefetch" href="/assets/js/51.14540eb0.js"><link rel="prefetch" href="/assets/js/52.93f35e88.js"><link rel="prefetch" href="/assets/js/53.7c049f09.js"><link rel="prefetch" href="/assets/js/54.f7eaa9b3.js"><link rel="prefetch" href="/assets/js/55.9bb7e324.js"><link rel="prefetch" href="/assets/js/56.89680b5f.js"><link rel="prefetch" href="/assets/js/57.d23a36a0.js"><link rel="prefetch" href="/assets/js/58.d6ecf109.js"><link rel="prefetch" href="/assets/js/59.2413f3e8.js"><link rel="prefetch" href="/assets/js/6.284aa379.js"><link rel="prefetch" href="/assets/js/60.2ba7e1f1.js"><link rel="prefetch" href="/assets/js/61.cbf7ddc5.js"><link rel="prefetch" href="/assets/js/62.b67746c5.js"><link rel="prefetch" href="/assets/js/63.f36d1c36.js"><link rel="prefetch" href="/assets/js/64.de418901.js"><link rel="prefetch" href="/assets/js/65.3a78e7ab.js"><link rel="prefetch" href="/assets/js/66.80284f76.js"><link rel="prefetch" href="/assets/js/67.f490b3ba.js"><link rel="prefetch" href="/assets/js/68.b254c0db.js"><link rel="prefetch" href="/assets/js/69.aa02899e.js"><link rel="prefetch" href="/assets/js/7.efe1ac00.js"><link rel="prefetch" href="/assets/js/70.e0e43c6d.js"><link rel="prefetch" href="/assets/js/71.3221c5c3.js"><link rel="prefetch" href="/assets/js/72.574b88f9.js"><link rel="prefetch" href="/assets/js/73.64d1967a.js"><link rel="prefetch" href="/assets/js/74.01b0b059.js"><link rel="prefetch" href="/assets/js/75.090dd2bd.js"><link rel="prefetch" href="/assets/js/76.1d10e016.js"><link rel="prefetch" href="/assets/js/77.b1dcc79d.js"><link rel="prefetch" href="/assets/js/78.8aaf44d8.js"><link rel="prefetch" href="/assets/js/79.f99b4e0b.js"><link rel="prefetch" href="/assets/js/80.e39c8290.js"><link rel="prefetch" href="/assets/js/81.7dddd1df.js"><link rel="prefetch" href="/assets/js/82.395a2825.js"><link rel="prefetch" href="/assets/js/83.b185e39e.js"><link rel="prefetch" href="/assets/js/84.35f95fbd.js"><link rel="prefetch" href="/assets/js/85.95561e16.js"><link rel="prefetch" href="/assets/js/86.0b07522e.js"><link rel="prefetch" href="/assets/js/87.901a36a7.js"><link rel="prefetch" href="/assets/js/88.3e2a6405.js"><link rel="prefetch" href="/assets/js/89.2a223f71.js"><link rel="prefetch" href="/assets/js/90.f6847e6f.js"><link rel="prefetch" href="/assets/js/91.459f47c4.js"><link rel="prefetch" href="/assets/js/92.59af99f3.js"><link rel="prefetch" href="/assets/js/93.777ed24e.js"><link rel="prefetch" href="/assets/js/94.cbf13135.js"><link rel="prefetch" href="/assets/js/95.e872f001.js"><link rel="prefetch" href="/assets/js/96.bf6c7db8.js"><link rel="prefetch" href="/assets/js/97.b56a229d.js"><link rel="prefetch" href="/assets/js/98.5684704f.js"><link rel="prefetch" href="/assets/js/99.e94a4089.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.d128eee5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b59c7f1d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KRKRZQV" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript> <div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/en/" class="home-link router-link-active"><div class="logo-and-title"><img src="https://assets.notification.canada.ca/static/gov-canada-en.svg" alt="Federal Science DataHub" class="logo"> <div class="site-name"><h2>Federal Science DataHub</h2></div></div></a> <div class="links"><div class="search-box"><input aria-label="Search" type="search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide nav-links"><div class="nav-item"><a href="/fr/databricks/Connexion-à-l'API-Google.html" class="nav-link">
  Français
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/fr/databricks/Connexion-à-l'API-Google.html" class="nav-link">
  Français
</a></div> <!----></nav> <div class="back-to-notify"><a href="https://federal-science-datahub.canada.ca/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Back to the FSDH
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <ul class="sidebar-links"><li><a href="/en/" aria-current="page" class="sidebar-link">Overview</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/en/managing-workspaces-and-users" class="sidebar-heading clickable"><span>Managing Workspaces and Users</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/en/migration" class="sidebar-heading clickable"><span>Migrating to Production</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/en/storage" class="sidebar-heading clickable"><span>Storage</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/en/databricks" class="sidebar-heading clickable router-link-active open"><span>Databricks</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/en/databricks/Databricks-101.html" class="sidebar-link">Getting Started with Databricks</a></li><li><a href="/en/databricks/Cluster-Policies.html" class="sidebar-link">FSDH Cluster Policies</a></li><li><a href="/en/databricks/Git-Integration.html" class="sidebar-link">Git/GitHub Integration with Databricks</a></li><li><a href="/en/databricks/vscode_extension.html" class="sidebar-link">Databricks VS Code Extension</a></li><li><a href="/en/databricks/Conda-Packages.html" class="sidebar-link">Working with Conda</a></li><li><a href="/en/databricks/Connecting-Google-API.html" aria-current="page" class="active sidebar-link">Connecting Google API to Databricks</a></li><li><a href="/en/databricks/Dashboarding.html" class="sidebar-link">How to Dashboard in Databricks</a></li><li><a href="/en/databricks/Dashboarding-Tool-Comparison.html" class="sidebar-link">Dashboarding Tool Comparison</a></li><li><a href="/en/databricks/Experiments-Automl.html" class="sidebar-link">Databricks MLFlow: AutoML and Experiments</a></li><li><a href="/en/databricks/Workflows.html" class="sidebar-link">Databricks Workflows</a></li><li><a href="/en/databricks/Databricks-FAQ.html" class="sidebar-link">Databricks Frequently Asked Questions</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/en/postgresql" class="sidebar-heading clickable"><span>PostgreSQL</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/en/apps" class="sidebar-heading clickable"><span>Web Applications</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/en/guidance" class="sidebar-heading clickable"><span>User Guidance</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/en/Terms-And-Conditions.html" class="sidebar-link">Terms and Conditions</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="connecting-google-api-to-databricks"><a href="#connecting-google-api-to-databricks" aria-hidden="true" tabindex="-1" class="header-anchor">#</a> Connecting Google API to Databricks</h1> <p>This document details how to configure credentials to connect any google API such as Google Earth Engine, BigTable, and BigQuery.</p> <h2 id="assumptions"><a href="#assumptions" aria-hidden="true" tabindex="-1" class="header-anchor">#</a> Assumptions</h2> <ul><li>The FSDH will not provide credentials for the Google Cloud Platform and assumes the user has been provided an access by their department</li> <li>The user is familiar with the Google product used</li></ul> <h2 id="_1-create-a-google-cloud-project"><a href="#_1-create-a-google-cloud-project" aria-hidden="true" tabindex="-1" class="header-anchor">#</a> 1. <a href="https://developers.google.com/workspace/guides/create-project" target="_blank" rel="noopener noreferrer">Create a Google Cloud Project<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h2> <p>Follow the link for instructions on how to create a Google Cloud Project.</p> <h2 id="_2-enable-the-apis-services-necessary"><a href="#_2-enable-the-apis-services-necessary" aria-hidden="true" tabindex="-1" class="header-anchor">#</a> 2. Enable the APIs &amp; Services necessary</h2> <p>Once your project is created and selected, in the navigation bar, click on &quot;APIs &amp; Services&quot;:</p> <p><img src="/assets/img/google-1.373c2986.png" alt="341182784_1883945795306857_7440166856820153159_n"></p> <p>Then click on &quot;Enable APIs &amp; Services&quot;:</p> <p><img src="/assets/img/google-2.78d7c82d.png" alt="341291789_178018718053904_5458837908367107510_n"></p> <p>Search for the services you may need such as &quot;BigQuery API&quot;, &quot;BigTable API&quot;, &quot;Earth Engine API&quot;, etc. It should then appear in the search results. Click on it, then click on &quot;Enable&quot;.</p> <h2 id="_3-create-a-service-account-and-obtain-a-private-key"><a href="#_3-create-a-service-account-and-obtain-a-private-key" aria-hidden="true" tabindex="-1" class="header-anchor">#</a> 3. Create a Service account and obtain a private key.</h2> <p>Once you have enabled the APIs you need in your project, open the navigation menu and click on &quot;IAM &amp; Admin&quot;:</p> <p><img src="/assets/img/google-3.2076ab1d.png" alt="341174751_558854192793790_2404372516710887907_n"></p> <p>Then click on &quot;Service Accounts&quot;:</p> <p><img src="/assets/img/google-4.5a7fdfb7.png" alt="342383092_889586648769272_4903323285442570884_n"></p> <p>Then create a new service account:</p> <p><img src="/assets/img/google-5.b03c1421.png" alt="341223863_914125263146363_524864849766701058_n">
Enter the necessary information (name, ID, description) in the first step, then in the second step, select the roles necessary for your service account. Depending on what service you are using, you will have to select the proper roles: for example, when using Earth Engine API, you need to select the admin, viewer or writer roles, depending on your needs:</p> <p><img src="/assets/img/google-6.9c977b9b.png" alt="341285054_594648945966990_3340994669833248652_n"></p> <p>Then, skip the 3rd step and create your service account by clicking on &quot;Done&quot;. This should bring you back to the list of all service accounts and you should see the service account you just created listed. Click on it, then click on the &quot;Keys&quot; tab:</p> <p><img src="/assets/img/google-7.2a4829dc.png" alt="328758927_2692944394192271_6807215753292084072_n">
Click on &quot;Add Key&quot; and &quot;Create new key&quot;, and select the JSON format for your key:</p> <p><img src="/assets/img/google-8.a17d5827.png" alt="341264731_1182567819100669_7664721525011167448_n"></p> <p>This will automatically create a key and download it. Make sure you keep this key.</p> <h2 id="_4-register-your-cloud-project"><a href="#_4-register-your-cloud-project" aria-hidden="true" tabindex="-1" class="header-anchor">#</a> 4. Register your cloud project</h2> <p>In the case of certain APIs, you may need to register your Google Cloud project. For example, Google Earth Engine requires us to navigate to <a href="https://code.earthengine.google.com/register" target="_blank" rel="noopener noreferrer">this registering link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and sign-in using the same google account you use for Google Cloud, in order to register your project.</p> <p>To register your Google Cloud</p> <p>Select &quot;Use with a Cloud Project&quot;</p> <p>Select &quot;Paid&quot; or &quot;Unpaid usage&quot; depending on your personal needs and role. In our case, we will select &quot;Unpaid usage&quot;. It will prompt you to select a project type, select &quot;Government&quot;.</p> <p>Select &quot;Choose an existing cloud project&quot; and select the project you have enabled Google Earth Engine API in.</p> <p>Finally, review the information you have given and confirm.</p> <h2 id="_5-install-the-client-side-sdk-for-your-service"><a href="#_5-install-the-client-side-sdk-for-your-service" aria-hidden="true" tabindex="-1" class="header-anchor">#</a> 5. Install the client-side SDK for your service</h2> <p>Your service may require you to install a package on Databricks in order to use it, as is the case for Google Earth Engine API. For this step, we will demonstrate the installation of Google's Earth Engine API, but any packages can be installed that way.</p> <p>There are two ways to install a package. To install a Python package in the notebook scope, run the following Python magic line (make sure to replace <code>earthengine-api</code> with your package name, which you may need to search online for):</p> <div class="language- extra-class"><pre class="language-text"><code>%pip install earthengine-api
</code></pre></div><p>Upon the success of running this line, skip to the next step. If instead you want to install the package on the cluster, open the navigation bar on Databricks, and click &quot;Compute&quot;. Select the cluster you want to install the package on, then click on libraries:</p> <p><img src="/assets/img/google-9.d4476ca2.png" alt="341180939_1322586438321309_3468577516645542908_n"></p> <p>Then click on &quot;Install new&quot;:</p> <p><img src="/assets/img/google-10.2986069f.png" alt="341112662_216410727698121_7329229316469598703_n">
In the pop-up menu, select PyPI, and in the &quot;package name&quot; field, enter the name of your package (for us: <code>earthengine-api</code>), then click &quot;Install&quot;. Once you start your cluster, it will install the library and it will be available on all notebooks that are attached to this cluster.</p> <h2 id="_6-using-your-google-api"><a href="#_6-using-your-google-api" aria-hidden="true" tabindex="-1" class="header-anchor">#</a> 6. Using your Google API</h2> <p>Begin by uploading the private key we created from step 3. You can do so by either uploading to your FSDH storage, or you can upload directly to Databricks. Take note of where your key is stored, then use the following code to link to it. This code was created for the case of using Earth Engine API, but the process is extremely similar from one service to another.</p> <h3 id="using-a-private-key-uploaded-through-the-databricks-file-upload"><a href="#using-a-private-key-uploaded-through-the-databricks-file-upload" aria-hidden="true" tabindex="-1" class="header-anchor">#</a> Using a private key uploaded through the Databricks File Upload</h3> <div class="language- extra-class"><pre class="language-text"><code>import ee

# Enter the email associated with your service account created in step 3:
service_account = 'my-service-account@...gserviceaccount.com'
# In our case:
service_account = 'david-rene@earth-engine-384112.iam.gserviceaccount.com'

# Enter the path to your credentials:
credsPath = '/dbfs/Filestore/tables/credentials.json'
# In our case, using a key that we uploaded through Databricks file upload:
credsPath = '/dbfs/FileStore/tables/earth_engine_384112_03e2e02ee924.json'

# EARTH ENGINE ONLY:
# We can then initialize a session:
credentials = ee.ServiceAccountCredentials(service_account, credsPath)
ee.Initialize(credentials)

# Let's test it out:
print(ee.Image(&quot;NASA/NASADEM_HGT/001&quot;).get(&quot;title&quot;).getInfo())
</code></pre></div><h3 id="using-a-private-key-uploaded-to-fsdh-storage"><a href="#using-a-private-key-uploaded-to-fsdh-storage" aria-hidden="true" tabindex="-1" class="header-anchor">#</a> Using a private key uploaded to FSDH storage</h3> <div class="language- extra-class"><pre class="language-text"><code>import ee
import json

# Enter the email associated with your service account created in step 3:
service_account = 'my-service-account@...gserviceaccount.com'
# In our case:
service_account = 'david-rene@earth-engine-384112.iam.gserviceaccount.com'

# Enter the path to your credentials:
credsPath = '/mnt/fsdh-dbk-main-mount/path/to/credentials.json'
# In our case, using a key that we uploaded to FSDH storage:
credsPath = '/mnt/fsdh-dbk-main-mount/David/earth-engine-384112-72d27e31c3b7.json'

json_rows = spark.read.text(credsPath).collect() # Read the file using spark
creds = json.loads(&quot;&quot;.join([row.value for row in json_rows])) # Load it into a proper json/dict

# Dump into a json file with the original name but in filestore
newPath = &quot;/dbfs/FileStore/tables/&quot;+credsPath.split(&quot;/&quot;)[-1]
with open(newPath, &quot;w&quot;) as f:
    json.dump(creds,f)

# EARTH ENGINE ONLY:
# We can then initialize a session:
credentials = ee.ServiceAccountCredentials(service_account, newPath)
ee.Initialize(credentials)

# Let's test it out:
print(ee.Image(&quot;NASA/NASADEM_HGT/001&quot;).get(&quot;title&quot;).getInfo())
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/ssc-sp/fsdh-pfds-docs/edit/main/src/en/databricks/Connecting-Google-API.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub (opens in a new tab)</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last updated:</span> <span class="time">2026-01-05</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/en/databricks/Conda-Packages.html" class="prev">
        Working with Conda
      </a></span> <span class="next"><a href="/en/databricks/Dashboarding.html">
        How to Dashboard in Databricks
      </a>
      →
    </span></p></div> </main></div></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.0a2a5975.js" defer></script><script src="/assets/js/4.dafd24fd.js" defer></script><script src="/assets/js/2.d936b15f.js" defer></script><script src="/assets/js/1.19ca758f.js" defer></script><script src="/assets/js/23.a59c3ee7.js" defer></script>
  </body>
</html>
