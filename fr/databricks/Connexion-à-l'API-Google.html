<!DOCTYPE html>
<html lang="fr-CA">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Connexion de l&#39;API Google à Databricks | Plateforme fédérale de données scientifiques</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="shortcut icon" href="https://notification.canada.ca/static/images/favicon.ico">
    <script>
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-KRKRZQV');
    </script>
    <script async="true" src="https://www.googletagmanager.com/gtag/js?id=G-R04KFLQCVQ"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-R04KFLQCVQ', {anonymize_ip: true});
    </script>
    <meta name="description" content="Apprenez à utiliser la plateforme PFDS">
    <meta charset="utf-8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.b59c7f1d.css" as="style"><link rel="preload" href="/assets/js/app.0a2a5975.js" as="script"><link rel="preload" href="/assets/js/4.dafd24fd.js" as="script"><link rel="preload" href="/assets/js/2.d936b15f.js" as="script"><link rel="preload" href="/assets/js/1.19ca758f.js" as="script"><link rel="preload" href="/assets/js/24.c4769d6f.js" as="script"><link rel="prefetch" href="/assets/js/10.a6457c3f.js"><link rel="prefetch" href="/assets/js/100.85215be8.js"><link rel="prefetch" href="/assets/js/101.f4d3c114.js"><link rel="prefetch" href="/assets/js/102.43e0af8e.js"><link rel="prefetch" href="/assets/js/103.4aa134e8.js"><link rel="prefetch" href="/assets/js/104.89b1f352.js"><link rel="prefetch" href="/assets/js/105.2c7257da.js"><link rel="prefetch" href="/assets/js/106.28828cb7.js"><link rel="prefetch" href="/assets/js/107.03894f46.js"><link rel="prefetch" href="/assets/js/108.976afe8f.js"><link rel="prefetch" href="/assets/js/109.e919eb71.js"><link rel="prefetch" href="/assets/js/11.6740aaf5.js"><link rel="prefetch" href="/assets/js/110.d4d4e55b.js"><link rel="prefetch" href="/assets/js/111.73622971.js"><link rel="prefetch" href="/assets/js/112.725353e9.js"><link rel="prefetch" href="/assets/js/113.b9e523ad.js"><link rel="prefetch" href="/assets/js/114.695b89bf.js"><link rel="prefetch" href="/assets/js/115.8a6e0ff6.js"><link rel="prefetch" href="/assets/js/116.eba46494.js"><link rel="prefetch" href="/assets/js/117.ac90ecf2.js"><link rel="prefetch" href="/assets/js/118.ab71ed8f.js"><link rel="prefetch" href="/assets/js/119.a56c547d.js"><link rel="prefetch" href="/assets/js/12.95218709.js"><link rel="prefetch" href="/assets/js/120.6ef9b6df.js"><link rel="prefetch" href="/assets/js/121.3b66427f.js"><link rel="prefetch" href="/assets/js/122.fca01062.js"><link rel="prefetch" href="/assets/js/13.efb9ce07.js"><link rel="prefetch" href="/assets/js/14.a9ccf8ab.js"><link rel="prefetch" href="/assets/js/15.d6b231bc.js"><link rel="prefetch" href="/assets/js/16.d6bef624.js"><link rel="prefetch" href="/assets/js/17.3422d1e8.js"><link rel="prefetch" href="/assets/js/18.cd78629b.js"><link rel="prefetch" href="/assets/js/19.cec6d776.js"><link rel="prefetch" href="/assets/js/20.80d382c5.js"><link rel="prefetch" href="/assets/js/21.06973a16.js"><link rel="prefetch" href="/assets/js/22.c21d3b36.js"><link rel="prefetch" href="/assets/js/23.a59c3ee7.js"><link rel="prefetch" href="/assets/js/25.12bad863.js"><link rel="prefetch" href="/assets/js/26.25d769e7.js"><link rel="prefetch" href="/assets/js/27.21c948be.js"><link rel="prefetch" href="/assets/js/28.518a3878.js"><link rel="prefetch" href="/assets/js/29.1f44630f.js"><link rel="prefetch" href="/assets/js/3.483d7c3c.js"><link rel="prefetch" href="/assets/js/30.7287f1ad.js"><link rel="prefetch" href="/assets/js/31.e9b3e747.js"><link rel="prefetch" href="/assets/js/32.e00610a0.js"><link rel="prefetch" href="/assets/js/33.56eb8b8a.js"><link rel="prefetch" href="/assets/js/34.0385d86b.js"><link rel="prefetch" href="/assets/js/35.8a232afb.js"><link rel="prefetch" href="/assets/js/36.6df5f29e.js"><link rel="prefetch" href="/assets/js/37.5cbf2e6f.js"><link rel="prefetch" href="/assets/js/38.a3491c11.js"><link rel="prefetch" href="/assets/js/39.e690063b.js"><link rel="prefetch" href="/assets/js/40.88a5993f.js"><link rel="prefetch" href="/assets/js/41.6bddbde1.js"><link rel="prefetch" href="/assets/js/42.5d460257.js"><link rel="prefetch" href="/assets/js/43.b9f67c15.js"><link rel="prefetch" href="/assets/js/44.cec63df2.js"><link rel="prefetch" href="/assets/js/45.8529b952.js"><link rel="prefetch" href="/assets/js/46.322ca9f6.js"><link rel="prefetch" href="/assets/js/47.0f77804b.js"><link rel="prefetch" href="/assets/js/48.19ec2f28.js"><link rel="prefetch" href="/assets/js/49.17254e9d.js"><link rel="prefetch" href="/assets/js/5.de5a16ea.js"><link rel="prefetch" href="/assets/js/50.cde4e83f.js"><link rel="prefetch" href="/assets/js/51.14540eb0.js"><link rel="prefetch" href="/assets/js/52.93f35e88.js"><link rel="prefetch" href="/assets/js/53.7c049f09.js"><link rel="prefetch" href="/assets/js/54.f7eaa9b3.js"><link rel="prefetch" href="/assets/js/55.9bb7e324.js"><link rel="prefetch" href="/assets/js/56.89680b5f.js"><link rel="prefetch" href="/assets/js/57.d23a36a0.js"><link rel="prefetch" href="/assets/js/58.d6ecf109.js"><link rel="prefetch" href="/assets/js/59.2413f3e8.js"><link rel="prefetch" href="/assets/js/6.284aa379.js"><link rel="prefetch" href="/assets/js/60.2ba7e1f1.js"><link rel="prefetch" href="/assets/js/61.cbf7ddc5.js"><link rel="prefetch" href="/assets/js/62.b67746c5.js"><link rel="prefetch" href="/assets/js/63.f36d1c36.js"><link rel="prefetch" href="/assets/js/64.de418901.js"><link rel="prefetch" href="/assets/js/65.3a78e7ab.js"><link rel="prefetch" href="/assets/js/66.80284f76.js"><link rel="prefetch" href="/assets/js/67.f490b3ba.js"><link rel="prefetch" href="/assets/js/68.b254c0db.js"><link rel="prefetch" href="/assets/js/69.aa02899e.js"><link rel="prefetch" href="/assets/js/7.efe1ac00.js"><link rel="prefetch" href="/assets/js/70.e0e43c6d.js"><link rel="prefetch" href="/assets/js/71.3221c5c3.js"><link rel="prefetch" href="/assets/js/72.574b88f9.js"><link rel="prefetch" href="/assets/js/73.64d1967a.js"><link rel="prefetch" href="/assets/js/74.01b0b059.js"><link rel="prefetch" href="/assets/js/75.090dd2bd.js"><link rel="prefetch" href="/assets/js/76.1d10e016.js"><link rel="prefetch" href="/assets/js/77.b1dcc79d.js"><link rel="prefetch" href="/assets/js/78.8aaf44d8.js"><link rel="prefetch" href="/assets/js/79.f99b4e0b.js"><link rel="prefetch" href="/assets/js/80.e39c8290.js"><link rel="prefetch" href="/assets/js/81.7dddd1df.js"><link rel="prefetch" href="/assets/js/82.395a2825.js"><link rel="prefetch" href="/assets/js/83.b185e39e.js"><link rel="prefetch" href="/assets/js/84.35f95fbd.js"><link rel="prefetch" href="/assets/js/85.95561e16.js"><link rel="prefetch" href="/assets/js/86.0b07522e.js"><link rel="prefetch" href="/assets/js/87.901a36a7.js"><link rel="prefetch" href="/assets/js/88.3e2a6405.js"><link rel="prefetch" href="/assets/js/89.2a223f71.js"><link rel="prefetch" href="/assets/js/90.f6847e6f.js"><link rel="prefetch" href="/assets/js/91.459f47c4.js"><link rel="prefetch" href="/assets/js/92.59af99f3.js"><link rel="prefetch" href="/assets/js/93.777ed24e.js"><link rel="prefetch" href="/assets/js/94.cbf13135.js"><link rel="prefetch" href="/assets/js/95.e872f001.js"><link rel="prefetch" href="/assets/js/96.bf6c7db8.js"><link rel="prefetch" href="/assets/js/97.b56a229d.js"><link rel="prefetch" href="/assets/js/98.5684704f.js"><link rel="prefetch" href="/assets/js/99.e94a4089.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.d128eee5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b59c7f1d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KRKRZQV" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript> <div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/fr/" class="home-link router-link-active"><div class="logo-and-title"><img src="https://assets.notification.canada.ca/static/gov-canada-fr.svg" alt="Plateforme fédérale de données scientifiques" class="logo"> <div class="site-name"><h2>Plateforme fédérale de données scientifiques</h2></div></div></a> <div class="links"><div class="search-box"><input aria-label="Search" type="search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!----> <div class="back-to-notify"><a href="https://plateforme-federale-donnees-scientifiques.canada.ca/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Retour à la PFDS
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <ul class="sidebar-links"><li><a href="/fr/" aria-current="page" class="sidebar-link">Survol</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/fr/gerer-espaces-et-utilisateurs" class="sidebar-heading clickable"><span>Gérer les espaces de travail et les utilisateurs</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/fr/migration" class="sidebar-heading clickable"><span>Migration vers la production</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/fr/stockage" class="sidebar-heading clickable"><span>Stockage</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/fr/databricks" class="sidebar-heading clickable router-link-active open"><span>Databricks</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/fr/databricks/Databricks-101.html" class="sidebar-link">Commencer avec Databricks sur le DataHub scientifique fédéral</a></li><li><a href="/fr/databricks/Politiques-des-clusters.html" class="sidebar-link">Politiques des clusters du Federal Science Datahub Databricks</a></li><li><a href="/fr/databricks/Intégration-de-Git.html" class="sidebar-link">Intégration de Git/GitHub avec Databricks</a></li><li><a href="/fr/databricks/extension-vscode.html" class="sidebar-link">Databricks VS Code Extension</a></li><li><a href="/fr/databricks/Paquets-Conda.html" class="sidebar-link">Travailler avec Conda</a></li><li><a href="/fr/databricks/Connexion-à-l'API-Google.html" class="active sidebar-link">Connexion de l'API Google à Databricks</a></li><li><a href="/fr/databricks/Tableau-de-bord.html" class="sidebar-link">Comment créer un tableau de bord dans Databricks</a></li><li><a href="/fr/databricks/Comparaison-des-outils-de-tableau-de-bord.html" class="sidebar-link">Les tableaux de bord sur Databricks comparés à d'autres outils</a></li><li><a href="/fr/databricks/Expériences-Automl.html" class="sidebar-link">/fr/databricks/Expériences-Automl.html</a></li><li><a href="/fr/databricks/Flux-de-travail.html" class="sidebar-link">Databricks Workflows</a></li><li><a href="/fr/databricks/FAQ-Databricks.html" class="sidebar-link">Databricks Foire aux questions</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/fr/postgresql" class="sidebar-heading clickable"><span>PostgreSQL</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/fr/apps" class="sidebar-heading clickable"><span>Applications Web</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/fr/conseils" class="sidebar-heading clickable"><span>Conseils aux utilisateurs</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/fr/Conditions-generales.html" class="sidebar-link">Conditions générales</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="connexion-de-l-api-google-a-databricks"><a href="#connexion-de-l-api-google-a-databricks" aria-hidden="true" tabindex="-1" class="header-anchor">#</a> Connexion de l'API Google à Databricks</h1> <p>Ce document explique comment configurer les informations d'identification pour se connecter à n'importe quelle API Google telle que Google Earth Engine, BigTable et BigQuery.</p> <h2 id="hypotheses"><a href="#hypotheses" aria-hidden="true" tabindex="-1" class="header-anchor">#</a> Hypothèses</h2> <ul><li>La DHSF ne fournira pas d'identifiants pour la Google Cloud Platform et suppose que l'utilisateur a reçu un accès de son département.</li> <li>L'utilisateur connaît le produit Google utilisé</li></ul> <h2 id="_1-creer-un-projet-google-cloud"><a href="#_1-creer-un-projet-google-cloud" aria-hidden="true" tabindex="-1" class="header-anchor">#</a> 1. <a href="https://developers.google.com/workspace/guides/create-project" target="_blank" rel="noopener noreferrer">Créer un projet Google Cloud<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h2> <p>Suivez le lien pour savoir comment créer un projet Google Cloud.</p> <h2 id="_2-activer-les-api-et-les-services-necessaires"><a href="#_2-activer-les-api-et-les-services-necessaires" aria-hidden="true" tabindex="-1" class="header-anchor">#</a> 2. Activer les API et les services nécessaires</h2> <p>Une fois votre projet créé et sélectionné, dans la barre de navigation, cliquez sur &quot;APIs &amp; Services&quot; :</p> <p><img src="/assets/img/google-1.373c2986.png" alt="341182784_1883945795306857_7440166856820153159_n"></p> <p>Cliquez ensuite sur &quot;Enable APIs &amp; Services&quot; :</p> <p><img src="/assets/img/google-2.78d7c82d.png" alt="341291789_178018718053904_5458837908367107510_n">
Recherchez les services dont vous pourriez avoir besoin, tels que &quot;BigQuery API&quot;, &quot;BigTable API&quot;, &quot;Earth Engine API&quot;, etc. Il devrait alors apparaître dans les résultats de la recherche. Cliquez dessus, puis cliquez sur &quot;Enable&quot;.</p> <h2 id="_3-creez-un-compte-de-service-et-obtenez-une-cle-privee"><a href="#_3-creez-un-compte-de-service-et-obtenez-une-cle-privee" aria-hidden="true" tabindex="-1" class="header-anchor">#</a> 3. Créez un compte de service et obtenez une clé privée.</h2> <p>Une fois que vous avez activé les API dont vous avez besoin dans votre projet, ouvrez le menu de navigation et cliquez sur &quot;IAM &amp; Admin&quot; :</p> <p><img src="/assets/img/google-3.2076ab1d.png" alt="341174751_558854192793790_2404372516710887907_n"></p> <p>Cliquez ensuite sur &quot;Comptes de service&quot; :</p> <p><img src="/assets/img/google-4.5a7fdfb7.png" alt="342383092_889586648769272_4903323285442570884_n">
Créez ensuite un nouveau compte de service :</p> <p><img src="/assets/img/google-5.b03c1421.png" alt="341223863_914125263146363_524864849766701058_n"></p> <p>Saisissez les informations nécessaires (nom, ID, description) dans la première étape, puis dans la deuxième étape, sélectionnez les rôles nécessaires pour votre compte de service. En fonction du service que vous utilisez, vous devrez sélectionner les rôles appropriés : par exemple, si vous utilisez l'API Earth Engine, vous devez sélectionner les rôles admin, viewer ou writer, en fonction de vos besoins :</p> <p><img src="/assets/img/google-6.9c977b9b.png" alt="341285054_594648945966990_3340994669833248652_n">
Ensuite, sautez la troisième étape et créez votre compte de service en cliquant sur &quot;Terminé&quot;. Cela devrait vous ramener à la liste de tous les comptes de service et vous devriez voir le compte de service que vous venez de créer listé. Cliquez dessus, puis cliquez sur l'onglet &quot;Clés&quot; :</p> <p><img src="/assets/img/google-7.2a4829dc.png" alt="328758927_2692944394192271_6807215753292084072_n"></p> <p>Cliquez sur &quot;Add Key&quot; et &quot;Create new key&quot;, et sélectionnez le format JSON pour votre clé :</p> <p><img src="/assets/img/google-8.a17d5827.png" alt="341264731_1182567819100669_7664721525011167448_n">
Cela créera automatiquement une clé et la téléchargera. Veillez à conserver cette clé.</p> <h2 id="_4-enregistrez-votre-projet-cloud"><a href="#_4-enregistrez-votre-projet-cloud" aria-hidden="true" tabindex="-1" class="header-anchor">#</a> 4. Enregistrez votre projet cloud</h2> <p>Dans le cas de certaines API, il se peut que vous deviez enregistrer votre projet Google Cloud. Par exemple, Google Earth Engine nous demande de naviguer vers [ce lien d'enregistrement] (https://code.earthengine.google.com/register) et de nous connecter à l'aide du même compte Google que celui que vous utilisez pour Google Cloud, afin d'enregistrer votre projet.</p> <p>Pour enregistrer votre Google Cloud</p> <p>Sélectionnez &quot;Utiliser avec un projet cloud&quot;</p> <p>Sélectionnez &quot;Utilisation payante&quot; ou &quot;Utilisation non payante&quot; en fonction de vos besoins personnels et de votre rôle. Dans notre cas, nous sélectionnerons &quot;Usage non rémunéré&quot;. Le système vous invite à sélectionner un type de projet, choisissez &quot;Gouvernement&quot;.</p> <p>Sélectionnez &quot;Choose an existing cloud project&quot; et sélectionnez le projet dans lequel vous avez activé l'API Google Earth Engine.</p> <p>Enfin, vérifiez les informations que vous avez fournies et confirmez-les.</p> <h2 id="_5-installer-le-sdk-cote-client-pour-votre-service"><a href="#_5-installer-le-sdk-cote-client-pour-votre-service" aria-hidden="true" tabindex="-1" class="header-anchor">#</a> 5. Installer le SDK côté client pour votre service</h2> <p>Votre service peut nécessiter l'installation d'un paquetage sur Databricks afin de l'utiliser, comme c'est le cas pour l'API Google Earth Engine. Pour cette étape, nous allons démontrer l'installation de l'API Earth Engine de Google, mais tous les paquets peuvent être installés de cette manière.</p> <p>Il y a deux façons d'installer un paquetage. Pour installer un paquetage Python dans la portée du notebook, exécutez la ligne magique Python suivante (assurez-vous de remplacer <code>earthengine-api</code> par le nom de votre paquetage, que vous devrez peut-être rechercher en ligne) :</p> <div class="language- extra-class"><pre class="language-text"><code>%pip install earthengine-api
</code></pre></div><p>Si vous réussissez à exécuter cette ligne, passez à l'étape suivante. Si vous souhaitez plutôt installer le package sur le cluster, ouvrez la barre de navigation sur Databricks, et cliquez sur &quot;Compute&quot;. Sélectionnez le cluster sur lequel vous souhaitez installer le paquet, puis cliquez sur &quot;libraries&quot; :</p> <p><img src="/assets/img/google-9.d4476ca2.png" alt="341180939_1322586438321309_3468577516645542908_n"></p> <p>Cliquez ensuite sur &quot;Installer nouveau&quot; :</p> <p><img src="/assets/img/google-10.2986069f.png" alt="341112662_216410727698121_7329229316469598703_n">
Dans le menu contextuel, sélectionnez PyPI, et dans le champ &quot;package name&quot;, entrez le nom de votre paquet (pour nous : <code>earthengine-api</code>), puis cliquez sur &quot;Install&quot;. Une fois que vous aurez démarré votre cluster, il installera la bibliothèque et elle sera disponible sur tous les notebooks qui sont attachés à ce cluster.</p> <h2 id="_6-utilisation-de-votre-api-google"><a href="#_6-utilisation-de-votre-api-google" aria-hidden="true" tabindex="-1" class="header-anchor">#</a> 6. Utilisation de votre API Google</h2> <p>Commencez par télécharger la clé privée que nous avons créée à l'étape 3. Vous pouvez le faire soit en téléchargeant vers votre stockage DHSF, soit en téléchargeant directement vers Databricks. Prenez note de l'endroit où votre clé est stockée, puis utilisez le code suivant pour y accéder. Ce code a été créé pour l'utilisation de l'API Earth Engine, mais le processus est très similaire d'un service à l'autre.</p> <h3 id="utilisation-d-une-cle-privee-telechargee-via-databricks-file-upload"><a href="#utilisation-d-une-cle-privee-telechargee-via-databricks-file-upload" aria-hidden="true" tabindex="-1" class="header-anchor">#</a> Utilisation d'une clé privée téléchargée via Databricks File Upload</h3> <div class="language- extra-class"><pre class="language-text"><code>importation ee

# Entrez l'email associé à votre compte de service créé à l'étape 3 :
compte_service = 'my-service-account@...gserviceaccount.com'
# Dans notre cas :
compte_service = 'david-rene@earth-engine-384112.iam.gserviceaccount.com'

# Entrez le chemin d'accès à vos informations d'identification :
credsPath = '/dbfs/Filestore/tables/credentials.json'
# Dans notre cas, nous utilisons une clé que nous avons téléchargée via Databricks file upload :
credsPath = '/dbfs/FileStore/tables/earth_engine_384112_03e2e02ee924.json'

# MOTEUR À TERRE UNIQUEMENT :
# Nous pouvons alors initialiser une session :
credentials = ee.ServiceAccountCredentials(service_account, credsPath)
ee.Initialize(credentials)

# Testons-le :
print(ee.Image(&quot;NASA/NASADEM_HGT/001&quot;).get(&quot;title&quot;).getInfo())
</code></pre></div><h3 id="utilisation-d-une-cle-privee-telechargee-sur-le-stockage-dhsf"><a href="#utilisation-d-une-cle-privee-telechargee-sur-le-stockage-dhsf" aria-hidden="true" tabindex="-1" class="header-anchor">#</a> Utilisation d'une clé privée téléchargée sur le stockage DHSF</h3> <div class="language- extra-class"><pre class="language-text"><code>importation ee
import json

# Entrez l'email associé à votre compte de service créé à l'étape 3 :
compte_service = 'my-service-account@...gserviceaccount.com'
# Dans notre cas :
compte_service = 'david-rene@earth-engine-384112.iam.gserviceaccount.com'

# Entrez le chemin d'accès à vos informations d'identification :
credsPath = '/mnt/fsdh-dbk-main-mount/path/to/credentials.json'
# Dans notre cas, nous utilisons une clé que nous avons téléchargée dans le stockage DHSF :
credsPath = '/mnt/fsdh-dbk-main-mount/David/earth-engine-384112-72d27e31c3b7.json'

json_rows = spark.read.text(credsPath).collect() # Lire le fichier en utilisant spark
creds = json.loads(&quot;&quot;.join([row.value for row in json_rows])) # Chargement dans un fichier json/dict correct

# Dépose dans un fichier json avec le nom d'origine mais dans le dépôt de fichiers
newPath = &quot;/dbfs/FileStore/tables/&quot;+credsPath.split(&quot;/&quot;)[-1]
avec open(newPath, &quot;w&quot;) as f :
    json.dump(creds,f)

# MOTEUR À TERRE UNIQUEMENT :
# Nous pouvons alors initialiser une session :
credentials = ee.ServiceAccountCredentials(service_account, newPath)
ee.Initialize(credentials)

# Testons-le :
print(ee.Image(&quot;NASA/NASADEM_HGT/001&quot;).get(&quot;title&quot;).getInfo())
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/ssc-sp/fsdh-pfds-docs/edit/main/src/fr/databricks/Connexion-à-l'API-Google.md" target="_blank" rel="noopener noreferrer">Modifier cette page sur GitHub (ouvre dans un nouvel onglet)</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Dernière mise à jour :</span> <span class="time">2026-01-05</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/fr/databricks/Paquets-Conda.html" class="prev">
        Travailler avec Conda
      </a></span> <span class="next"><a href="/fr/databricks/Tableau-de-bord.html">
        Comment créer un tableau de bord dans Databricks
      </a>
      →
    </span></p></div> </main></div></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.0a2a5975.js" defer></script><script src="/assets/js/4.dafd24fd.js" defer></script><script src="/assets/js/2.d936b15f.js" defer></script><script src="/assets/js/1.19ca758f.js" defer></script><script src="/assets/js/24.c4769d6f.js" defer></script>
  </body>
</html>
