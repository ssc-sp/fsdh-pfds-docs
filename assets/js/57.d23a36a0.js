(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{379:function(e,t,a){e.exports=a.p+"assets/img/Conda-Packages-1.7700db5f.jpg"},687:function(e,t,a){"use strict";a.r(t);var s=a(4),n=Object(s.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"working-with-conda"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#working-with-conda","aria-hidden":"true",tabindex:"-1"}},[e._v("#")]),e._v(" Working with Conda")]),e._v(" "),t("p",[e._v("Databricks can support Conda based environments. FSDH provides two options for users to work with Conda.")]),e._v(" "),t("ol",[t("li",[e._v("Project specific Docker image with Conda support and a predefined Conda environment. The Docker image needs to be co-developed with the FSDH support team and pushed to GitHub Container Registry (GHCR).")]),e._v(" "),t("li",[e._v("Generic Docker image with Conda support. Users will need to install packages in their notebooks.")])]),e._v(" "),t("p",[e._v("For illustration purposes, the following steps are based on option 1.")]),e._v(" "),t("h2",{attrs:{id:"step-1-create-environment-yaml"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#step-1-create-environment-yaml","aria-hidden":"true",tabindex:"-1"}},[e._v("#")]),e._v(" Step 1: Create environment YAML")]),e._v(" "),t("p",[e._v("Sample code for "),t("code",[e._v("env.yml")]),e._v(". Skip to Step 3 if using an existing Docker image.")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("name: fsdh-sample\nchannels:\n  - bioconda\n  - default\ndependencies:\n  - python=3.8.16\n  - pip=23.0.1\n  - six=1.16.0\n  - ipython=8.12.0\n  - nomkl=3.0\n  - numpy=1.24.3\n  - pandas=1.1.5\n  - traitlets=5.7.1\n  - wheel=0.38.4\n  - hifiasm=0.16.1\n  - pip:\n    - pyarrow==1.0.1\n")])])]),t("h2",{attrs:{id:"step-2-build-and-push-the-image"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#step-2-build-and-push-the-image","aria-hidden":"true",tabindex:"-1"}},[e._v("#")]),e._v(" Step 2. Build and Push the Image")]),e._v(" "),t("p",[e._v("The FSDH team builds and pushes the image to GitHub. Skip to Step 3 if using an existing Docker image.")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('docker build -t fsdh-sample .\nexport GHCR_PAT="XXX"\necho $GHCR_PAT|docker login ghcr.io -u <username> --password-stdin\ndocker tag fsdh-sample ghcr.io/ssc-sp/fsdh-sample:latest\ndocker push ghcr.io/ssc-sp/fsdh-sample:latest\n')])])]),t("h2",{attrs:{id:"step-3-create-a-cluster"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#step-3-create-a-cluster","aria-hidden":"true",tabindex:"-1"}},[e._v("#")]),e._v(" Step 3. Create a cluster")]),e._v(" "),t("ol",[t("li",[e._v("Ask your admin to enable Container Service for your Databricks workspace.")]),e._v(" "),t("li",[e._v('Create a cluster with access mode "No Isolation Shared"')]),e._v(" "),t("li",[e._v("Choose a runtime of 10.4-LTS, 9.1-LTS or 7.3-LTS")]),e._v(" "),t("li",[e._v("Under Advance -> Docker, use image "),t("code",[e._v("ghcr.io/ssc-sp/fsdh-sample:latest")]),e._v(" "),t("img",{attrs:{src:a(379),alt:"image"}})])]),e._v(" "),t("h2",{attrs:{id:"step-4-validate-the-cluster"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#step-4-validate-the-cluster","aria-hidden":"true",tabindex:"-1"}},[e._v("#")]),e._v(" Step 4. Validate the Cluster")]),e._v(" "),t("p",[e._v("Run the following code:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("%sh\nconda list\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);